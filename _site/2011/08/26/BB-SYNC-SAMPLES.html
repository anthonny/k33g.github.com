<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Backbone.sync - Quelques exemples</title>
    <meta name="author" content="k33g" />

    <!-- Homepage CSS -->
    <!--
    <link rel="stylesheet" href="http://twitter.github.io/bootstrap/assets/css/bootstrap.css">
    <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
	-->

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <link href="/bootstrap3/css/bootstrap.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="bootstrap3/js/bootstrap.min.js"></script>

    <style>
        .jumbotron {
            background-color: #444444;
            border-radius: 0px;
            padding: 10px 30px;
        }
    </style>

    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/css/syntax.css" type="text/css" />
		<link rel="stylesheet" href="/css/default.min.css">


    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

</head>

<body >

<div class="jumbotron">
    <a class="label label-warning" href="/">K33G_ORG's Blog</a>
    <a class="label label-info" href="http://twitter.com/k33g_org/">@k33g_org</a>
    <a class="label label-warning" href="http://feeds.feedburner.com/K33g_orgsBlog">rss</a>
    <a class="label label-info" href="http://k33g.github.com/all.html">all posts</a>
    <a class="label label-warning" href="http://www.k33g.org/">me</a>
</div>
<div class="container">

    <div class="row">
        <div>
    <div>
        <g:plusone size="medium"></g:plusone>
        <a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="k33g_org">Tweet</a><script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
        <h1>Backbone.sync : "Quelques exemples"</h1>

<p>J'ai créé un nouveau repo GitHub : <a href="https://github.com/k33g/ossicle">"Ossicle"</a> pour répertorier les différentes expériences que je pourrais faire sur Backbone.js.</p>

<p>J'ai bossé sur 2 versions de <code>Backbone.sync</code>, une pour faire du localStorage et une autre pour aller lire des fichiers markdown d'un repo GitHub (cette dernière est "un peu" expérimentale).</p>

<h2>LocalStorage</h2>

<p>Ce qui "m'ennuyait" dans l'exemple fourni sur le site de Backbone.js <a href="https://github.com/documentcloud/backbone/blob/master/examples/backbone-localstorage.js">backbone-localstorage.js</a> c'est que c'est l'ensemble de la collection qui chargée : une collection correspond à une clé et une valeur (toute la collection) dans le localStorage du navigateur.</p>

<p>Je suis parti sur un système différent : un modèle correpond à une clé et une valeur (après on aime ou pas, c'est juste une question de point de vue), c'est à dire que l'on ne sauvegarde plus la collection (contenant les modèles) mais uniquement les modèles (avec une clé composée du nom de la "base" et de l'id du modèle). Vous pouvez donc charger un/des modèle(s) à partir du localStorage sans être obligé de charger toute la collection :</p>

<pre><code>window.Doc = Backbone.Model.extend({
    storeName : "docsDB"
});


window.Docs = Backbone.Collection.extend({
    model : Doc,
    storeName : "docsDB"
});

var doc1 = new Doc({id:'001', title:'TITLE 1', text:'TEXT1'});

doc1.save(); //sauvegare le modèle avec une clé : "docsDB|001"

/* ... */

var un_doc = new Doc({id:'001'});
un_doc.fetch(); //charge le modèle ayant la clé : "docsDB|001"

var docs = new Docs(); //une collection

docs.fetch(); //charge la collection à partie des modèles "persistés" dont la clé commence par "docsDB"
</code></pre>

<p>Le code source est ici : <a href="https://github.com/k33g/ossicle/blob/master/js/backbone.sync/backbone-sync-localstorage.js">https://github.com/k33g/ossicle/blob/master/js/backbone.sync/backbone-sync-localstorage.js</a>.</p>

<h2>GitHub API</h2>

<p>L'utilisation est un peu différente (uniquement en lecture). Attention : c'est du bricolage.</p>

<ul>
<li>Vous trouverez le code ici : <a href="https://github.com/k33g/ossicle/blob/master/js/backbone.sync/backbone-sync-github.js">backbone-sync-github.js</a></li>
<li>un exemple par là : <a href="https://github.com/k33g/ossicle/blob/master/bb-github-api.js">bb-github-api.js</a> &amp; <a href="https://github.com/k33g/ossicle/blob/master/index-bb-github-api.html">index-bb-github-api.html</a></li>
<li>et enfin quelques explications : <a href="https://github.com/k33g/ossicle/blob/master/posts/2011-08-26-MAIN.md">2011-08-26-MAIN.md</a> ou <a href="https://github.com/k33g/ossicle/blob/master/README.md">README.md</a></li>
</ul>


<p>PS : je suis preneur de tout conseil et/ou amélioration</p>

<p>Et bon WE @ tous !</p>

        <g:plusone size="medium"></g:plusone>
        <a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="k33g_org">Tweet</a><script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
    </div>
    <div class="whoring">
        <hr>
        <div id="disqus_thread"></div>
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname = 'k33gblog'; // required: replace example with your forum shortname

                var disqus_identifier = 'Backbone.sync - Quelques exemples';

                // The following are highly recommended additional parameters. Remove the slashes in front to use.
                // var disqus_identifier = 'unique_dynamic_id_1234';
                // var disqus_url = 'http://example.com/permalink-to-page.html';

                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>


    <div id="related">
        <h2>Related Posts</h2>
            <ul class="posts">
            
              <li><span>10 May 2014</span> &raquo; <a href="/2014/05/10/ATOM-SHELL.html">Atom-shell, javascript everywhere</a></li>
            
              <li><span>09 May 2014</span> &raquo; <a href="/2014/05/09/NPM-NODE-CLI.html">Faites vos outils avec npm et node</a></li>
            
              <li><span>04 May 2014</span> &raquo; <a href="/2014/05/04/MIXIT-2014.html">MixITFR2014</a></li>
            
        </ul>
    </div>
</div>
    </div>

    <div class="row">
        <h3>A voir : Les GROS tutos Play!> 1 & 2 !, Backbone</h3>
        <ul>
            <li>
                <a href="http://3monkeys.github.com/play.rules/livre.play.deux.web/play2.rules.return.html">
                    Play!► 2 en douceur •
                </a>
                <a href="http://3monkeys.github.com/play.rules/livre.play.un.web/play.rules.one.html">
                    Apprendre Play!► 1 •
                </a>
                <a href="http://3monkeys.github.com/play.rules/">
                    Versions epub & pdf
                </a>
            </li>
            <li>
                <a href="http://k33g.github.io/backbone.en.douceur/">
                    Backbone.js "en douceur" •
                </a>
                <a href="http://k33g.github.io/backbone.en.douceur/backbone.en.douceur.20121220.pdf"><b>LE</b> pdf</a>
            </li>
            <li>
                A venir : Golo "dans tous les sens" ♥
            </li>
        </ul>
    </div>
    <hr>

</div>



<!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11383603-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- Google Analytics end -->

</body>
</html>