<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>React Backbone Browserify</title>
    <meta name="author" content="k33g" />

    <!-- Homepage CSS -->
    <!--
    <link rel="stylesheet" href="http://twitter.github.io/bootstrap/assets/css/bootstrap.css">
    <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
	-->

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <link href="/bootstrap3/css/bootstrap.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="bootstrap3/js/bootstrap.min.js"></script>

    <style>
        .jumbotron {
            background-color: #444444;
            border-radius: 0px;
            padding: 10px 30px;
        }
    </style>

    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/css/syntax.css" type="text/css" />
		<link rel="stylesheet" href="/css/default.min.css">


    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

</head>

<body >

<div class="jumbotron">
    <a class="label label-warning" href="/">K33G_ORG's Blog</a>
    <a class="label label-info" href="http://twitter.com/k33g_org/">@k33g_org</a>
    <a class="label label-warning" href="http://feeds.feedburner.com/K33g_orgsBlog">rss</a>
    <a class="label label-info" href="http://k33g.github.com/all.html">all posts</a>
    <a class="label label-warning" href="http://www.k33g.org/">me</a>
</div>
<div class="container">

    <div class="row">
        <div>
    <div>
        <g:plusone size="medium"></g:plusone>
        <a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="k33g_org">Tweet</a><script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
        <h1>React - Backbone - Browserify : Que du bonheur!</h1>

<p>J'ai eu beau essayer d'autres frameworks (Angular, Polymer, Ember ...), j'en reviens toujours à Backbone : son modèle objet, ses modèles et collections, associés à de la légèreté et de la simplicité, je n'arrive pas à m'en passer. Par contre, je trouve lourds les "Backbone Views" et les templates (Mustache et les autres), et probablement encore plus lourd, le système de gestion de dépendances et de module RequireJS.</p>

<h2>Remplacer Backbone.View</h2>

<p>Il y a peu j'ai découvert <a href="http://facebook.github.io/react/">React</a> qui permet de se substituer aux "Views" Backbone d'une façon tout à fait "concurrentielle". J'y gagne en visibilité (facilité de développement et de maintenance) et en puissance (plus rapide, plus léger). (cf. mon post <a href="http://k33g.github.io/2014/01/30/V.html">"React : La Révolution des Views (?) (côté front)"</a> pour une initiation rapide).</p>

<h2>Remplacer RequireJS</h2>

<p>J'ai mis un moment à l'accepter, mais pour développer de "grosses" application javascript (surtout si l'on bosse en équipe), un gestionnaire de modules et de dépendances est <strong>OBLIGATOIRE</strong>!.
Mais être obligé de déclarer l'ensemble des dépendances dans un fichier (avec le risque dans oublier si on ajoute une librairie), la notation utilisée dans chacun des modules (avec le risque d'oublier une dépendance là aussi), ... tout ça me "pompe l'air"!
J'aime bien me simplifier la vie, et j'ai fini par tester quelque chose que j'avais mis de côté depuis un moment : <a href="http://browserify.org/">Browserify</a>. Pour faire court, cela permet d'avoir un système de gestion de module côté front identique à celui de <strong>Nodejs</strong> et donc d'utiliser <strong>npm</strong> pour télécharger vos librairies javascript préférées. Par exemple pour "récupérer" Backbone, préférez un <code>npm install backbone</code> à un <code>bower install backbone</code>. Ensuite, lorsque vous aurez besoin de Backbone dans un module, il suffira d'écrire <code>var Backbone = require("backbone");</code> dans votre fichier javascript. Vous n'aurez pas de tag <code>&lt;script&gt;&lt;/script&gt;</code> à ajouter dans votre page html, puisque la commande <code>browserify something.js -o bundle.js</code> permettra de créer un fichier javascript unique avec toutes les dépendances "mergée".</p>

<h2>Oui, et comment fait-on?</h2>

<p>Le but de cet article n'est pas de vous expliquer de A à Z comment construire l'ensemble de la stack et des éléments nécessaires pour faire une 1ère application, mais de vous permettre de découvrir simplement et facilement comment tout ceci fonctionne. Pour ce faire j'ai créé un générateur pour <strong><a href="http://yeoman.io/">Yeoman</a></strong> <em>(1)</em> qui va vous permettre facilement (et automatiquement) de créer un projet avec toutes les dépendances nécessaires pour commencer à jouer avec :</p>

<ul>
<li>React</li>
<li>Backbone</li>
<li>Browserify</li>
<li>Bootstrap</li>
<li>et accessoirement Express, Mongoose (et donc MongoDb que vousdevrez installer)</li>
</ul>


<p>Ce générateur s'appelle <strong>generator-react-app</strong>, vous pouvez le trouver ici : <a href="https://www.npmjs.org/package/generator-react-app">https://www.npmjs.org/package/generator-react-app</a>, il est "accompagné" de quelque "subs-generators" permettant de générer des bouts de code automatiquement (ie: des modèles, des composants backbones, ...), mais aussi de quelques mécaniques Grunt (grunt-react, grunt-browserify, grunt-watch) permettant de transformer automatiquement vos composants React en javascript mais aussi de générer le "bundle browserifiy javascript final".</p>

<p>Tout ceci peut paraître un peu abstrait, donc passons directement à la pratique.</p>

<h2>Installer generator-react-app</h2>

<p><em>Bien sûr vous avez besoin de Yeoman (et donc node et npm).</em></p>

<p>Dans un terminal, tapez <code>sudo npm install -g generator-react-app</code></p>

<h2>Créer le squelette de votre projet</h2>

<p>Créez un répertoire : <code>mkdir humans-demo</code>, puis "allez" dans le répertoire : <code>cd humans-demo</code> et enfin lancez "mon killer generator" <em>(2)</em> : <code>yo react-app</code> et donnez un nom à votre application et à votre base de données :</p>

<pre><code> _____             _       _____
| __  |___ ___ ___| |_ ___|  _  |___ ___
|    -| -_| .'|  _|  _|___|     | . | . |
|__|__|___|__,|___|_|     |__|__|  _|  _|
                                |_| |_|
Hi! This is a React-Express-Mongoose Generator :) Enjoy!
[?] Application name? HumansDemo
[?] DataBase name? DemoDb
</code></pre>

<p>attendez : le générateur va créer la structure de votre projet et télécharger via <strong>npm</strong> et <strong>bower</strong> toutes les dépendances nécessaires à votre projet.</p>

<h2>Lancez votre application (pour voir)</h2>

<p>Vous devez maintenant avoir l'arborescence suivante :</p>

<p><img src="https://github.com/k33g/k33g.github.com/raw/master/images/react-000.png" alt="Alt &quot;000.png&quot;" /></p>

<ul>
<li>lancez MongoDb : dans un terminal tapez <code>mongod</code></li>
<li>lancez votre application : <code>node app.js</code> (un conseil installez <strong>nodemon</strong> <a href="https://github.com/remy/nodemon">https://github.com/remy/nodemon</a> cela permet d'écouter les changements des fichiers et de re-démarrer node à chaque changement)</li>
<li>lancez <code>grunt browserify</code> (cela va créer un fichier <code>public/js/app.built.js</code>)</li>
<li>lancez <code>grunt-watch</code> pour que Grunt écoute les changements</li>
<li>allez à <a href="http://localhost:3000">http://localhost:3000</a></li>
</ul>


<p>Si tout va bien vous devriez obtenir ceci :</p>

<p><img src="https://github.com/k33g/k33g.github.com/raw/master/images/react-001.png" alt="Alt &quot;001.png&quot;" /></p>

<p><em>Si tout va mal, "pinguez" moi ...</em></p>

<h2>Créez des services CRUD pour Express (côté back)</h2>

<p>Dans un terminal, tapez : <code>yo react-app:mgroutes Human</code> et répondez aux questions :</p>

<pre><code>[?] mongoose schema (ie: name: String, remark: String)? firstName: String, lastName: String
[?] url? humans
   create models/Human.js
   create routes/Humans.routes.js
   create controllers/HumansCtrl.js
</code></pre>

<p>Nous venons de renseigner le schema Mongoose : <code>firstName: String, lastName: String</code>, l'url (gardez la valeur par défaut) de base des routes sera <code>/humans</code> et 3 fichiers ont été créés <strong>automatiquement</strong> :</p>

<h3>models/Human.js</h3>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mongoose&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">HumanModel</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">HumanSchema</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">Schema</span><span class="p">({</span>
    <span class="nx">firstName</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span> <span class="nx">lastName</span><span class="o">:</span> <span class="nb">String</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="s1">&#39;Human&#39;</span><span class="p">,</span> <span class="nx">HumanSchema</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">HumanModel</span><span class="p">;</span>
</code></pre></div>


<h3>controllers/HumansCtrl.js</h3>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">Human</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../models/Human&quot;</span><span class="p">)();</span>

<span class="kd">var</span> <span class="nx">HumansCtrl</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">create</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">human</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Human</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span>
      <span class="nx">human</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">human</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">human</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">fetchAll</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">Human</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">humans</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">humans</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">fetch</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">Human</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">_id</span><span class="o">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">humans</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">humans</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">update</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">delete</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">_id</span>
    <span class="nx">Human</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span><span class="nx">_id</span><span class="o">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">},</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">human</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">human</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="k">delete</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">Human</span><span class="p">.</span><span class="nx">findOneAndRemove</span><span class="p">({</span><span class="nx">_id</span><span class="o">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">human</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">human</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">HumansCtrl</span><span class="p">;</span>
</code></pre></div>


<h3>routes/Humans.routes.js</h3>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">HumansCtrl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../controllers/HumansCtrl&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">HumansRoutes</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">app</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&quot;/humans&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">HumansCtrl</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;/humans&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">HumansCtrl</span><span class="p">.</span><span class="nx">fetchAll</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;/humans/:id&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//try findById</span>
    <span class="nx">HumansCtrl</span><span class="p">.</span><span class="nx">fetch</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">app</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">&quot;/humans/:id&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">HumansCtrl</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">app</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s2">&quot;/humans/:id&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">HumansCtrl</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">HumansRoutes</span><span class="p">;</span>
</code></pre></div>


<p>Je vous ai déjà fait gagner beaucoup de temps non ? ;)</p>

<h2>Créez les modèles et collections Backbone (côté front)</h2>

<p>Dans un terminal, tapez : <code>yo react-app:bbmc Human</code> et répondez aux questions : (gardez les valeurs par défaut quand elles sont proposées)</p>

<pre><code>[?] model name (ie: Book) Human
[?] defaults (ie: name: 'John Doe', remark: 'N/A')? firstName: "John", lastName: "Doe"
[?] url? humans
   create public/js/modules/models/HumanModel.js
   create public/js/modules/models/HumansCollection.js
</code></pre>

<p>Nous avons donc obtenu toujours automatiquement un modèle et une collection.</p>

<h3>public/js/modules/models/HumanModel.js</h3>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">Backbone</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;backbone&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">HumanModel</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">defaults</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(){</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">firstName</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="nx">lastName</span><span class="o">:</span> <span class="s2">&quot;Doe&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">urlRoot</span> <span class="o">:</span> <span class="s2">&quot;humans&quot;</span><span class="p">,</span>
  <span class="nx">idAttribute</span><span class="o">:</span> <span class="s2">&quot;_id&quot;</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">HumanModel</span><span class="p">;</span>
</code></pre></div>


<h3>public/js/modules/models/HumansCollection.js</h3>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">Backbone</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;backbone&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">HumanModel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;./HumanModel&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">HumansCollection</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">url</span> <span class="o">:</span> <span class="s2">&quot;humans&quot;</span><span class="p">,</span>
  <span class="nx">model</span><span class="o">:</span> <span class="nx">HumanModel</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">HumansCollection</span><span class="p">;</span>
</code></pre></div>


<h3>Vous avez vu ?!</h3>

<p>Nous sommes côté client, et nous déclarons les dépendances comme avec <strong>Node</strong> : <code>var HumanModel = require("./HumanModel");</code>, c'est tout de même plus simple qu'avec <strong>Require</strong>, c'est la magie de <strong>Browserify</strong>!</p>

<p>Il ne faut pas oublier d'exporter chacun des modules pour pouvoir les utiliser : <code>module.exports = HumanModel;</code> et <code>module.exports = HumansCollection;</code>.</p>

<h2>Passons à l'IHM avec React ou comment remplacer les "Views" Backbone</h2>

<p>Nous voulons pouvoir saisir des informations et les afficher, nous allons donc créer un formulaire et une table.</p>

<p>Dans un terminal, tapez : <code>yo react-app:formbb HumanForm Human</code> et répondez aux questions : (gardez les valeurs par défaut quand elles sont proposées)</p>

<pre><code>[?] model name (ie: Book) Human
[?] fields (for UI) (ie : title, author)? firstName, lastName
[?] url? humans
   create public/js/react_components/HumanForm.js
</code></pre>

<p>Ensuite, <code>yo react-app:tablebb HumansTable Human</code></p>

<pre><code>[?] model name (ie: Book) Human
[?] fields (for UI) (ie : title, author)? firstName, lastName
[?] url? humans
   create public/js/react_components/HumansTable.js
</code></pre>

<p>Nous avons donc maintenant 2 composants <strong>React</strong> (toujours automatiquement)</p>

<h3>public/js/react_components/HumanForm.js</h3>

<div class="highlight"><pre><code class="javascript"><span class="cm">/** @jsx React.DOM */</span>

<span class="kd">var</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">HumanModel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../modules/models/HumanModel&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">HumanForm</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>

  <span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span><span class="nx">data</span> <span class="o">:</span> <span class="p">[],</span> <span class="nx">message</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">};</span>
  <span class="p">},</span>

  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">form</span> <span class="nx">role</span><span class="o">=</span><span class="s2">&quot;form&quot;</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;form-horizontal&quot;</span> <span class="nx">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;form-group&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;form-control&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;firstName&quot;</span> <span class="nx">ref</span><span class="o">=</span><span class="s2">&quot;firstName&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;form-group&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;form-control&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;lastName&quot;</span> <span class="nx">ref</span><span class="o">=</span><span class="s2">&quot;lastName&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="err">/div&gt;</span>
        
        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;form-group&quot;</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;btn btn-primary&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Add Human&quot;</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;form-group&quot;</span><span class="o">&gt;&lt;</span><span class="nx">strong</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/strong&gt;&lt;/div&gt;</span>
      <span class="o">&lt;</span><span class="err">/form&gt;</span>
    <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">handleSubmit</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">firstName</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">refs</span><span class="p">.</span><span class="nx">firstName</span><span class="p">.</span><span class="nx">getDOMNode</span><span class="p">().</span><span class="nx">value</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">lastName</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">refs</span><span class="p">.</span><span class="nx">lastName</span><span class="p">.</span><span class="nx">getDOMNode</span><span class="p">().</span><span class="nx">value</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">firstName</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="kc">false</span><span class="p">;}</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">lastName</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="kc">false</span><span class="p">;}</span>
    
    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">data</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">firstName</span><span class="p">;</span>
    <span class="nx">data</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">lastName</span><span class="p">;</span>
    

    <span class="kd">var</span> <span class="nx">human</span><span class="o">=</span> <span class="k">new</span> <span class="nx">HumanModel</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

    <span class="nx">human</span><span class="p">.</span><span class="nx">save</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
          <span class="nx">message</span> <span class="o">:</span> <span class="nx">human</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;_id&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; added!&quot;</span>
        <span class="p">});</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refs</span><span class="p">.</span><span class="nx">firstName</span><span class="p">.</span><span class="nx">getDOMNode</span><span class="p">().</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refs</span><span class="p">.</span><span class="nx">lastName</span><span class="p">.</span><span class="nx">getDOMNode</span><span class="p">().</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        
        <span class="k">this</span><span class="p">.</span><span class="nx">refs</span><span class="p">.</span><span class="nx">firstName</span><span class="p">.</span><span class="nx">getDOMNode</span><span class="p">().</span><span class="nx">focus</span><span class="p">();</span>
      <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">))</span>
      <span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
          <span class="nx">message</span>  <span class="o">:</span> <span class="nx">err</span><span class="p">.</span><span class="nx">responseText</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">err</span><span class="p">.</span><span class="nx">statusText</span>
        <span class="p">});</span>
      <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>

    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">HumanForm</span><span class="p">;</span>
</code></pre></div>


<h3>public/js/react_components/HumansTable.js</h3>

<div class="highlight"><pre><code class="javascript"><span class="cm">/** @jsx React.DOM */</span>

<span class="kd">var</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">Backbone</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;backbone&quot;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">HumanModel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../modules/models/HumanModel&quot;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">HumansCollection</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../modules/models/HumansCollection&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">HumansTable</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>

  <span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span><span class="nx">data</span> <span class="o">:</span> <span class="p">[],</span> <span class="nx">message</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">};</span>
  <span class="p">},</span>

  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">humansRows</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">human</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">deleteLink</span> <span class="o">=</span> <span class="s2">&quot;#delete_human/&quot;</span> <span class="o">+</span> <span class="nx">human</span><span class="p">.</span><span class="nx">_id</span><span class="p">;</span>

      <span class="k">return</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">tr</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">human</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/td&gt;</span>
          <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">human</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/td&gt;</span>
          
          <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="p">{</span><span class="nx">deleteLink</span><span class="p">}</span><span class="o">&gt;</span><span class="k">delete</span><span class="p">{</span><span class="s2">&quot; &quot;</span><span class="p">}{</span><span class="nx">human</span><span class="p">.</span><span class="nx">_id</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/a&gt;&lt;/td&gt;</span>
        <span class="o">&lt;</span><span class="err">/tr&gt;</span>
      <span class="p">);</span>
    <span class="p">});</span>

    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;table-responsive&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">strong</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/strong&gt;</span>
        <span class="o">&lt;</span><span class="nx">table</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;table table-striped table-bordered table-hover&quot;</span> <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">thead</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">tr</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">th</span><span class="o">&gt;</span><span class="nx">firstName</span><span class="o">&lt;</span><span class="err">/th&gt;&lt;th&gt;lastName&lt;/th&gt;</span>
              <span class="o">&lt;</span><span class="nx">th</span><span class="o">&gt;</span><span class="nx">_id</span><span class="o">&lt;</span><span class="err">/th&gt;</span>
            <span class="o">&lt;</span><span class="err">/tr&gt;</span>
          <span class="o">&lt;</span><span class="err">/thead&gt;</span>
          <span class="o">&lt;</span><span class="nx">tbody</span><span class="o">&gt;</span>
            <span class="p">{</span><span class="nx">humansRows</span><span class="p">}</span>
          <span class="o">&lt;</span><span class="err">/tbody&gt;</span>
        <span class="o">&lt;</span><span class="err">/table&gt;</span>
      <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="p">);</span>
  <span class="p">},</span>  

  <span class="nx">getHumans</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">humans</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HumansCollection</span><span class="p">();</span>

    <span class="nx">humans</span><span class="p">.</span><span class="nx">fetch</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">data</span> <span class="o">:</span> <span class="nx">humans</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">(),</span> <span class="nx">message</span> <span class="o">:</span> <span class="nb">Date</span><span class="p">()});</span>
      <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">))</span>
      <span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
          <span class="nx">message</span>  <span class="o">:</span> <span class="nx">err</span><span class="p">.</span><span class="nx">responseText</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">err</span><span class="p">.</span><span class="nx">statusText</span>
        <span class="p">});</span>
      <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">))</span>
  <span class="p">},</span>
  
  <span class="nx">componentWillMount</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">getHumans</span><span class="p">();</span>
    <span class="nx">setInterval</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getHumans</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">pollInterval</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">componentDidMount</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">Router</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Router</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
      <span class="nx">routes</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;delete_human/:id&quot;</span> <span class="o">:</span> <span class="s2">&quot;human&quot;</span>
      <span class="p">},</span>
      <span class="nx">initialize</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Initialize router of HumansTable component&quot;</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">human</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;=== delete human ===&quot;</span><span class="p">,</span> <span class="nx">id</span><span class="p">);</span>
        <span class="k">new</span> <span class="nx">HumanModel</span><span class="p">({</span><span class="nx">_id</span><span class="o">:</span><span class="nx">id</span><span class="p">}).</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">router</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Router</span><span class="p">()</span>
  <span class="p">}</span>

<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">HumansTable</span><span class="p">;</span>
</code></pre></div>


<h3>Vous avez vu là aussi ... ?!</h3>

<p>Nous déclarons là aussi les dépendances de la même manière que pour les modèles et collection Backbone :</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">Backbone</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;backbone&quot;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">HumanModel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../modules/models/HumanModel&quot;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">HumansCollection</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../modules/models/HumansCollection&quot;</span><span class="p">);</span>
</code></pre></div>


<p>Et surtout ne pas oublier : <code>/** @jsx React.DOM */</code> pour que les composants soit bien transformés par <strong>grunt-react</strong>.</p>

<h3>One more thing!</h3>

<p>Une dernière petite remarque, dans la méthode <code>componentDidMount</code> de mon composant React, j'ai pu créer un "Router" Backbone complètement associé au composant.</p>

<h2>Il ne nous reste plus qu'à afficher tout ça</h2>

<h3>Modifiez public/js/modules/main.js`</h3>

<p>Ouvrez le fichier <code>public/js/modules/main.js</code> et remplacez son contenu par :</p>

<div class="highlight"><pre><code class="javascript"><span class="cm">/** @jsx React.DOM */</span>
<span class="kd">var</span> <span class="nx">React</span>   <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">Backbone</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;backbone&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">HumanForm</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../react_components/HumanForm&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">HumansTable</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../react_components/HumansTable&#39;</span><span class="p">);</span>

<span class="nx">Backbone</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>

<span class="nx">React</span><span class="p">.</span><span class="nx">renderComponent</span><span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">HumanForm</span><span class="o">/&gt;</span><span class="p">,</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;HumanForm&#39;</span><span class="p">)</span>
<span class="p">);</span>

<span class="nx">React</span><span class="p">.</span><span class="nx">renderComponent</span><span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">HumansTable</span> <span class="nx">pollInterval</span><span class="o">=</span><span class="p">{</span><span class="mi">500</span><span class="p">}</span><span class="o">/&gt;</span><span class="p">,</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;HumansTable&#39;</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div>


<h3>Modifiez public/index.html</h3>

<p>Modifiez le contenu du fichier <code>index.html</code> de la manière suivante :</p>

<div class="highlight"><pre><code class="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>HumansDemo<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">content=</span><span class="s">&quot;react application&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;author&quot;</span> <span class="na">content=</span><span class="s">&quot;John Doe&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;js/bower_components/bootstrap/dist/css/bootstrap.min.css&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;js/bower_components/bootstrap/dist/css/bootstrap-theme.min.css&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1&gt;</span>HumansDemo<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-md-6&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;HumanForm/&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-md-6&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;HumansTable/&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;js/app.built.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>


<p><strong>Vous pouvez remarquer</strong> que l'on n'insère qu'un seul script <code>js/app.built.js</code> qui est construit et mis à jour au fur et à mesure que l'on travail grâce aux tâches Grunt.</p>

<p>Et vous pouvez rafraîchir la page de votre navigateur et jouez avec :</p>

<p><img src="https://github.com/k33g/k33g.github.com/raw/master/images/react-002.png" alt="Alt &quot;002.png&quot;" /></p>

<p>Je joue avec tout cela depuis quelques jours et je trouve que marier <strong>React</strong> et <strong>Browserify</strong> simplifie le code, et en prime je peux conserver ce que je préfère dans <strong>Backbone</strong> : les modèles et les collections.</p>

<p>A l'usage, je trouve que l'utilisation des tâches <code>grunt-react</code> et <code>grunt-browserify</code> lancées via <code>grunt-watch</code> me permet de détecter rapidement (et de manière assez explicite) certaine erreurs.</p>

<p>Si vous avez des idées d'améliorations (notamment pour la partie Grunt) ou d'ajouts, n'hésitez pas à contribuer à mon générateur : <a href="https://github.com/k33g/generator-react-app">https://github.com/k33g/generator-react-app</a>. (<em>PS: j'ai aussi en projet d'en faire une version pour PlayFramework dès que j'ai un peu de temps</em>).</p>

<p>Tous les retours sont bienvenus :)</p>

<p><em>(1): je sais que j'avais dit que je trouvais Yeoman "pas très léger", mais une fois que l'on a fait son premier générateur, on s'aperçoit qu'il est diablement pratique.</em>
<em>(2) un peu d'autosatisfaction n'a jamais fait de mal.</em></p>

        <g:plusone size="medium"></g:plusone>
        <a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="k33g_org">Tweet</a><script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
    </div>
    <div class="whoring">
        <hr>
        <div id="disqus_thread"></div>
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname = 'k33gblog'; // required: replace example with your forum shortname

                var disqus_identifier = 'React Backbone Browserify';

                // The following are highly recommended additional parameters. Remove the slashes in front to use.
                // var disqus_identifier = 'unique_dynamic_id_1234';
                // var disqus_url = 'http://example.com/permalink-to-page.html';

                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>


    <div id="related">
        <h2>Related Posts</h2>
            <ul class="posts">
            
              <li><span>10 May 2014</span> &raquo; <a href="/2014/05/10/ATOM-SHELL.html">Atom-shell, javascript everywhere</a></li>
            
              <li><span>09 May 2014</span> &raquo; <a href="/2014/05/09/NPM-NODE-CLI.html">Faites vos outils avec npm et node</a></li>
            
              <li><span>04 May 2014</span> &raquo; <a href="/2014/05/04/MIXIT-2014.html">MixITFR2014</a></li>
            
        </ul>
    </div>
</div>
    </div>

    <div class="row">
        <h3>A voir : Les GROS tutos Play!> 1 & 2 !, Backbone</h3>
        <ul>
            <li>
                <a href="http://3monkeys.github.com/play.rules/livre.play.deux.web/play2.rules.return.html">
                    Play!► 2 en douceur •
                </a>
                <a href="http://3monkeys.github.com/play.rules/livre.play.un.web/play.rules.one.html">
                    Apprendre Play!► 1 •
                </a>
                <a href="http://3monkeys.github.com/play.rules/">
                    Versions epub & pdf
                </a>
            </li>
            <li>
                <a href="http://k33g.github.io/backbone.en.douceur/">
                    Backbone.js "en douceur" •
                </a>
                <a href="http://k33g.github.io/backbone.en.douceur/backbone.en.douceur.20121220.pdf"><b>LE</b> pdf</a>
            </li>
            <li>
                A venir : Golo "dans tous les sens" ♥
            </li>
        </ul>
    </div>
    <hr>

</div>



<!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11383603-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- Google Analytics end -->

</body>
</html>